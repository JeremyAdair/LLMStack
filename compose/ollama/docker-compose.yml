services:
  ollama:
    image: ollama/ollama:latest
    cpus: "${OLLAMA_CPUS:-6.0}"
    mem_limit: "${OLLAMA_MEM_LIMIT:-16g}"
    # Expose only on the internal network by default.
    expose:
      - "11434"
    volumes:
      # Persist downloaded models. Removing the volume deletes cached models.
      - ollama_data:/root/.ollama
    networks:
      - llm-stack
