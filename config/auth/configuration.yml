# Authelia configuration
# This file uses environment variables set in .env. Replace secrets before use.

server:
  address: tcp://0.0.0.0:9091/authelia

log:
  level: info

jwt_secret: "{{ env \"AUTHELIA_JWT_SECRET\" }}"

session:
  name: authelia_session
  secret: "{{ env \"AUTHELIA_SESSION_SECRET\" }}"
  expiration: 3600
  inactivity: 300
  cookies:
    - domain: "{{ env \"AUTH_DOMAIN\" }}"
      authelia_url: "{{ env \"AUTHELIA_URL\" }}"
      default_redirection_url: "{{ env \"AUTHELIA_DEFAULT_REDIRECT_URL\" }}"

storage:
  encryption_key: "{{ env \"AUTHELIA_STORAGE_ENCRYPTION_KEY\" }}"
  local:
    path: /data/db.sqlite3

authentication_backend:
  file:
    path: /config/users_database.yml

access_control:
  default_policy: deny
  rules:
    - domain: "{{ env \"AUTH_DOMAIN_WILDCARD\" }}"
      policy: one_factor
      resources:
        - "^/api/verify$"
        - "^/flowise/.*$"
        - "^/openhands/.*$"
        - "^/grafana/.*$"
        - "^/nodered/.*$"
        - "^/$"
    - domain: "{{ env \"LANDING_HOSTNAME\" }}"
      policy: one_factor
      resources:
        - "^/.*$"

regulation:
  max_retries: 5
  find_time: 120
  ban_time: 300

notifier:
  filesystem:
    filename: /data/notification.txt
